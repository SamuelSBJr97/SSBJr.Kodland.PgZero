%% Máquina de estados (IA dos bugs): cerco e ataque
stateDiagram-v2
  [*] --> Patrol
  Patrol --> Alerted : detect player (sound/vision)
  Alerted --> Surrounding : evaluate flank points
  Surrounding --> Approaching : move to surround positions
  Approaching --> Attacking : in attack range
  Attacking --> Retreating : low hp or heavy damage
  Retreating --> Patrol : lost interest / regroup
  Attacking --> Dead : hp <= 0
  Patrol --> Sleeping : out of active area
  Sleeping --> Patrol : reactivated

  %% Transições táticas
  note right of Surrounding
    - Ordem: múltiplos bugs calculam posições de cerco
    - Objetivo: forçar jogador a recuar para entradas/porta
  end note

  note right of Approaching
    - Uso de caminhos procedurais pre-calculados (path nodes)
    - Respeitar células bloqueadas (não atravessar paredes)
  end note
